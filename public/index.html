<!doctype html>
<html>
  <head>
    <title>Sugarscape</title>
    <link rel="stylesheet" type="text/css" href="css/sugarscape.css">
    <script type='text/javascript' src='js/sugarscape.js'></script>
  </head>
  <body>
    <p>Press space bar to play/pause the Sugarscape.</p>

    <script>
      var grid = new Sugarscape.Grid();
      var gridView = new Sugarscape.GridView(grid)
      gridView.render();

      var fps = 20; // Up to 60 frames per second
      var isPlaying = true;

      var tick = function() {
        setTimeout(function() {
          if (isPlaying) {
            grid.wakeAgents();
            grid.growSugar();
            gridView.render();
          }
          requestAnimationFrame(tick);
        }, 1000 / fps);
      }

      window.onkeydown = function() {
        if (event.which == 32) {
          isPlaying = !isPlaying;
        }
      };

      tick();
    </script>
  </body>
</html>
